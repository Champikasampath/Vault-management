<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: services/vault.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: services/vault.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import CONSTANTS from '../constants/constants.js';
import inquirer from 'inquirer';


export class Vault {
	/**
	 * constructor for Vault service
	 * @param Logger
	 * @param year
	 */
	constructor(log, db) {
		this.logger = log;
		this.Db = db;
	}

	/**
	 * Create dweller by prompting questions
	 * @return {Promise&lt;void>}
	 */
	async createDwellers() {
		inquirer.prompt([
			{
				name : 'name',
				message: 'Name of the dweller?'
			},
			{
				name : 'dob',
				message: 'Birth year?'
			},
			{
				name : 'ic_no',
				message: 'ID card number?'
			},
			{
				name : 'hair_color',
				message: 'Hair colour?'
			},
			{
				name : 'eye_color',
				message: 'Eye colour?'
			}
		]).then(async answers => {
			let obj = {
				"name": answers.name,
				"ic_no": answers.ic_no,
				"dob": answers.dob,
				"eye_color": answers.eye_color,
				"hair_color": answers.hair_color,
				"is_dead": false
			}
			await this.Db.writeSingleDweller(obj);
		})


	}

	/**
	 * Get Dwellers by id
	 * @param ic_no
	 * @return {Promise&lt;void>}
	 */
	async getDweller(ic_no) {
		try {
			let found = await this.Db.getById(ic_no);
			if(!found) {
				this.logger.info(CONSTANTS.MESSAGE.READ.NOT_FOUND_ERR);
				return;
			}
			this.logger.log(found);
		} catch (e) {
			this.logger.error(e)
		}
	}

	/**
	 * Search dwellers
	 * @param field
	 * @param op - supported '=','&lt;','>','LIKE'
	 * @param value
	 */
	async search(field, op, value){
		let found = [];

		//call relevant function by operator
		switch (op) {
		case 'equal_to':
			found = await this.Db.searchEqualTo(field, value);
			break;
		case 'less_than':
			found = await this.Db.searchLessThan(field, value);
			break;
		case 'LIKE':
			found = await this.Db.searchSubstring(field, value);
			break;
		default:
			this.logger.log(CONSTANTS.MESSAGE.READ.INVALID_OPERATOR);
			break;
		}
		if (found.length > 0) {
			this.logger.log(found);
		} else {
			this.logger.info(CONSTANTS.MESSAGE.READ.NO_RESULTS);
		}
	}

	/**
	 * set current year. this function should be used to forward the time
	 * @param year
	 * @return {Promise&lt;void>}
	 */
	async writeCurrentYear(year) {
		await this.Db.writeCurrentYear(year)
	}

}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Vault_Vault.html">Vault</a></li></ul><h3>Global</h3><ul><li><a href="global.html#error">error</a></li><li><a href="global.html#info">info</a></li><li><a href="global.html#log">log</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Sat Jul 31 2021 01:47:23 GMT+0530 (India Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
